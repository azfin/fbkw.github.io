(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{53973:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/yt",function(){return n(14480)}])},49690:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(85893),a=n(50723),s=n(9103),i=n(44082),c=(n(81553),n(97808),n(53948));n(92814);function u(e){return c._k(),(0,r.jsxs)("div",{className:"divCenter divCol",children:[(0,r.jsx)(i.Z,{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)("div",{className:"layoutContentWrapStyle",children:e.children}),(0,r.jsx)(a.Z,{style:{witdth:"100%"}})]})}},14480:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(85893),a=n(49690),s=(n(41664),n(34051)),i=n.n(s),c=n(67294),u=n(9669),l=n.n(u),o=n(52164);function d(e,t,n,r,a,s,i){try{var c=e[s](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function i(e){d(s,r,a,i,c,"next",e)}function c(e){d(s,r,a,i,c,"throw",e)}i(void 0)}))}}function p(){var e=(0,c.useState)(""),t=e[0],n=e[1],a=(0,c.useState)(20),s=a[0],u=a[1],d=(0,c.useState)(90),p=d[0],x=d[1],v=(0,c.useState)([]),m=v[0],f=v[1],b=(0,c.useState)(!1),w=b[0],g=b[1],j="AIzaSyCXWi6Tuh1eiNviMAwVVUfKbbI9HRpU7mg",y=function(){var e=h(i().mark((function e(t){var n,r,a,s,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.replace("@",""),c="https://www.googleapis.com/youtube/v3/search?part=snippet&type=channel&q=".concat(s,"&key=").concat(j),e.next=5,l().get(c);case 5:return u=e.sent,e.abrupt("return",(null===(n=u.data.items)||void 0===n||null===(r=n[0])||void 0===r||null===(a=r.snippet)||void 0===a?void 0:a.channelId)||null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=h(i().mark((function e(t){var n,r,a,s,c,u,o,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.match(/(?:youtube\.com)\/(@[^/?]+)/))){e.next=7;break}return s=a[1],e.next=6,y(s);case 6:return e.abrupt("return",e.sent);case 7:if(c=t.match(/(user|c|channel)\/([^/?]+)/)){e.next=10;break}return e.abrupt("return",null);case 10:if(u=c[1],o=c[2],"channel"!==u){e.next=14;break}return e.abrupt("return",o);case 14:return e.next=16,l().get("https://www.googleapis.com/youtube/v3/channels?part=id&".concat("user"===u?"forUsername":"id","=").concat(o,"&key=").concat(j));case 16:return d=e.sent,e.abrupt("return",null===(n=d.data.items)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.id);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=h(i().mark((function e(){var n,r,a,c,u,d,h,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),f([]),e.prev=2,e.next=5,k(t);case 5:if(n=e.sent){e.next=8;break}throw new Error("Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c channel ID t\u1eeb link.");case 8:return r=new Date(Date.now()-24*p*60*60*1e3).toISOString(),e.next=11,l().get("https://www.googleapis.com/youtube/v3/search",{params:{part:"snippet",channelId:n,maxResults:50,order:"date",publishedAfter:r,type:"video",key:j}});case 11:if(a=e.sent,0!==(c=a.data.items.map((function(e){return e.id.videoId}))).length){e.next=15;break}throw new Error("Kh\xf4ng c\xf3 video n\xe0o trong kho\u1ea3ng th\u1eddi gian n\xe0y.");case 15:return e.next=17,l().get("https://www.googleapis.com/youtube/v3/videos",{params:{part:"snippet,statistics",id:c.join(","),key:j}});case 17:u=e.sent,d=u.data.items.map((function(e){return{channel:e.snippet.channelTitle,title:e.snippet.title,views:parseInt(e.statistics.viewCount||"0"),link:"https://www.youtube.com/watch?v=".concat(e.id),id:e.id,published:(0,o.WU)(new Date(e.snippet.publishedAt),"dd/MM/yyyy"),thumbLink:e.snippet.thumbnails.medium.url,description:e.snippet.description}})),h=d.sort((function(e,t){return t.views-e.views})),x=h.slice(0,parseInt(s)),f(x),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(2),console.error("L\u1ed7i:",e.t0.message),alert("C\xf3 l\u1ed7i x\u1ea3y ra: "+e.t0.message);case 28:return e.prev=28,g(!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[2,24,28,31]])})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\ud83d\udd0d Ph\xe2n t\xedch video theo l\u01b0\u1ee3t xem"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,r.jsx)("input",{type:"text",className:"p-2 border rounded",placeholder:"Nh\u1eadp link k\xeanh YouTube",value:t,onChange:function(e){return n(e.target.value)}}),(0,r.jsx)("input",{type:"number",className:"p-2 border rounded",placeholder:"Top N video",value:s,onChange:function(e){return u(e.target.value)}}),(0,r.jsx)("input",{type:"number",className:"p-2 border rounded",placeholder:"S\u1ed1 ng\xe0y g\u1ea7n \u0111\xe2y (VD: 90)",value:p,onChange:function(e){return x(e.target.value)}}),(0,r.jsx)("button",{onClick:N,disabled:w,className:"bg-blue-600 text-white px-4 py-2 rounded",children:w?"\u0110ang t\u1ea3i...":"L\u1ea5y video"})]}),m.length>0&&(0,r.jsxs)("table",{className:"table-auto w-full border border-collapse text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-200",children:[(0,r.jsx)("th",{children:"Channel"}),(0,r.jsx)("th",{children:"Title"}),(0,r.jsx)("th",{children:"Views"}),(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Published"}),(0,r.jsx)("th",{children:"Thumb"}),(0,r.jsx)("th",{children:"Description"})]})}),(0,r.jsx)("tbody",{children:m.map((function(e){return(0,r.jsxs)("tr",{className:"border-t align-top",children:[(0,r.jsx)("td",{children:e.channel}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{href:e.link,className:"text-blue-600",target:"_blank",rel:"noreferrer",children:e.title})}),(0,r.jsx)("td",{children:e.views.toLocaleString()}),(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.published}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{href:e.thumbLink,target:"_blank",children:(0,r.jsx)("img",{src:e.thumbLink,alt:"thumb",className:"w-20"})})}),(0,r.jsxs)("td",{children:[e.description.slice(0,400),"..."]})]},e.id)}))})]})]})}function x(){return(0,r.jsx)(a.Z,{children:(0,r.jsx)(p,{})})}}},function(e){e.O(0,[523,260,868,695,774,888,179],(function(){return t=53973,e(e.s=t);var t}));var t=e.O();_N_E=t}]);